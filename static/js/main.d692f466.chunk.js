(this["webpackJsonpcurrent-spot-prices"]=this["webpackJsonpcurrent-spot-prices"]||[]).push([[0],{203:function(t,e,n){},348:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(77),c=n.n(i),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}n(203);var l=n(189),u=n(21),d=n(16),j=n(371),h=n(372),b=n(373),p=n(374),f=n(375),v=n(370),m=n(376),x=n(2);function O(t){var e=t.data;return Object(x.jsx)("div",{className:"spotprice-list",children:Object(x.jsx)(j.a,{component:h.a,children:Object(x.jsxs)(b.a,{sx:{minWidth:400},size:"small","aria-label":"Spotpriser",children:[Object(x.jsx)(p.a,{children:Object(x.jsxs)(f.a,{children:[Object(x.jsx)(v.a,{align:"right",children:"Datum"}),Object(x.jsx)(v.a,{align:"right",children:"Klockslag"}),Object(x.jsx)(v.a,{align:"right",children:"Spotpris"})]})}),Object(x.jsx)(m.a,{children:e.map((function(t){return Object(x.jsxs)(f.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(x.jsx)(v.a,{align:"right",children:t.timeStampDay}),Object(x.jsx)(v.a,{align:"right",children:t.timeStampHour}),Object(x.jsxs)(v.a,{align:"right",children:[t.value," ",t.unit]})]},t.timeStamp)}))})]})})})}var g=n(41),S=n(362),w=n(363),k=n(192),y=n(367),W=n(187),E=n(188),A=n(179),D=n(88);var N=function(){var t=Object(r.useState)({width:0,height:0}),e=Object(d.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){function t(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),window.addEventListener("deviceorientation",t),t(),function(){window.removeEventListener("resize",t),window.removeEventListener("deviceorientation",t)}}),[]),n},L=n(171);function H(t){var e=t.data,n=t.currentHour,r=a.a.useState(0),i=Object(d.a)(r,2),c=i[0],o=i[1],s=a.a.useState(),l=Object(d.a)(s,2),u=l[0],j=l[1],h="kr/kWh",b=N();function p(t){var e=t.x,n=t.y,r=t.value;return t.index===u?Object(x.jsxs)("text",{x:e,y:n,dy:-30,dx:11,fill:"#bbb",fontWeight:"bold",fontSize:16,textAnchor:"middle",children:[r.toFixed(2)," ",h]}):null}function f(t){var e=t.x,n=t.y,r=t.payload;return Object(x.jsx)("g",{transform:"translate(".concat(e,",").concat(n,")"),children:Object(x.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#bbb",transform:"rotate(-35)",children:r.value})})}function v(t){var e=t.x,n=t.y,r=t.payload;return Object(x.jsx)("g",{transform:"translate(".concat(e,",").concat(n,")"),children:Object(x.jsxs)("text",{x:0,y:0,dy:0,textAnchor:"end",fill:"#bbb",transform:"rotate(-35)",children:[r.value," ",h]})})}a.a.useEffect((function(){o(function(){var t=Math.max.apply(Math,Object(g.a)(e.map((function(t){return t.value}))).concat([0]));return Math.floor(t)+1}())}),[e]),a.a.useEffect((function(){j(e.findIndex((function(t){return t.timeStamp===n.timeStampShort})))}),[n.timeStampShort,e]);var m=function(t){var e=t.active,n=t.payload,r=t.label;return e&&n&&n.length?Object(x.jsxs)("div",{style:{background:"#3887ba",color:"#2e4355",padding:"1px 15px",border:"solid",borderRadius:"15px",fontWeight:"bold",opacity:"0.8"},children:[Object(x.jsx)("p",{children:r}),Object(x.jsxs)("p",{children:[n[0].value.toFixed(2)," ",h]})]}):null};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(L.a,{}),Object(x.jsx)(S.a,{width:"100%",height:b.height-100,children:Object(x.jsxs)(w.a,{data:e,margin:{top:20,right:50,left:20,bottom:70},children:[Object(x.jsx)(k.a,{type:"monotone",dataKey:"value",stroke:"#3887ba",label:Object(x.jsx)(p,{}),activeDot:{fill:"#2e4355",stroke:"#3887ba",strokeWidth:4,r:9},dot:"",strokeWidth:"4"}),Object(x.jsx)(y.a,{horizontal:"",vertical:"",stroke:"#243240"}),Object(x.jsx)(W.a,{dataKey:"timeStamp",tick:Object(x.jsx)(f,{}),ticks:e.map((function(t){return t.timeStamp})).filter((function(t,e,n){return e%6===0&&0!==e}))}),Object(x.jsx)(E.a,{domain:[0,c],tick:Object(x.jsx)(v,{}),ticks:function(){var t=Object(g.a)(Array(c+1).keys());return t.shift(),t}()}),Object(x.jsx)(A.a,{x:null===n||void 0===n?void 0:n.timeStampShort,stroke:"orange",strokeWidth:"1"}),Object(x.jsx)(D.a,{cursor:!1,offset:-100,content:Object(x.jsx)(m,{})})]})})]})}function I(t){var e,n,a=Object(r.useState)(null),i=Object(d.a)(a,2),c=i[0],o=i[1],s=Object(r.useState)(!1),l=Object(d.a)(s,2),u=l[0],j=l[1],h=Object(r.useState)([]),b=Object(d.a)(h,2),p=b[0],f=b[1],v=Object(r.useState)([]),m=Object(d.a)(v,2),g=m[0],S=m[1],w=Object(r.useState)(9e5),k=Object(d.a)(w,2),y=k[0],W=k[1],E=Object(r.useState)(),A=Object(d.a)(E,2),D=A[0],N=A[1],L=t.match.params.priceArea.toUpperCase();function I(){var t=(new Date).toLocaleString("sv-SE").substring(0,14)+"00:00";return{timeStampFull:t.replace(" ","T"),timeStampShort:t.substring(0,16),day:t.substring(0,10),hour:t.substring(11,16)}}return Object(r.useEffect)((function(){if(!["SN1","SN2","SN3","SN4"].includes(L.toUpperCase()))return j(!0),void o("Not supported price area");var t=function(){fetch(e()).then((function(t){return t.json()})).then((function(t){j(!0),o(null),function(t){var e=t.slice(-48).map((function(t){return{timeStamp:t.TimeStamp,timeStampDay:t.TimeStampDay,timeStampHour:t.TimeStampHour,value:t.Value,unit:t.Unit}}));f(e);var n=e.map((function(t){return{timeStamp:t.timeStampDay+" "+t.timeStampHour,value:Math.round(t.value,0)/100}}));S(n)}(t),W(9e5)}),(function(t){j(!0),o(t),W(15e3)}))},e=function(){var t=n().toLocaleString("sv-SE").split(" ")[0];return"https://jsonp.afeld.me/?url=https://www.vattenfall.se/api/price/spot/pricearea/".concat(t,"/2050-01-01/").concat(L)},n=function(){var t=new Date;return t.setDate(t.getDate()-1),t};t();var r=setInterval((function(){return t()}),y);return function(){return clearInterval(r)}}),[y,t,L]),Object(r.useEffect)((function(){N(I());var t=setInterval((function(){return N(I())}),6e4);return function(){return clearInterval(t)}}),[]),c?Object(x.jsxs)("div",{className:"error-div",children:["Error: ",null!==(e=c.message)&&void 0!==e?e:c]}):u?("/table/:priceArea"===t.match.path?n=Object(x.jsx)(O,{data:p}):"/graph/:priceArea"===t.match.path&&(n=Object(x.jsx)(H,{data:g,currentHour:D})),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{children:["Aktuella spotpriser ",L]}),n]})):Object(x.jsx)("div",{children:"Loading..."})}var T=function(){return Object(x.jsx)(l.a,{basename:"/current-spot-prices",children:Object(x.jsxs)(u.d,{children:[Object(x.jsx)(u.b,{path:"/table/:priceArea",component:I}),Object(x.jsx)(u.b,{path:"/graph/:priceArea",component:I}),Object(x.jsx)(u.b,{exact:!0,path:"/",children:Object(x.jsx)(u.a,{to:"/graph/sn3"})}),Object(x.jsx)(u.b,{path:"/",children:Object(x.jsx)("div",{className:"error-div",children:"Page not found"})})]})})};c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/current-spot-prices",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/current-spot-prices","/service-worker.js");o?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):s(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):s(e,t)}))}}()}},[[348,1,2]]]);
//# sourceMappingURL=main.d692f466.chunk.js.map