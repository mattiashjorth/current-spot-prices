(this["webpackJsonpcurrent-spot-prices"]=this["webpackJsonpcurrent-spot-prices"]||[]).push([[0],{215:function(t,e,r){},374:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),c=r(78),i=r.n(c),o=(r(215),r(201)),s=r(21),u=r(16),l=r(397),j=r(398),d=r(399),b=r(400),h=r(401),p=r(396),m=r(402),x=r(3);function f(t){var e=t.data;return Object(x.jsx)("div",{className:"spotprice-list",children:Object(x.jsx)(l.a,{component:j.a,children:Object(x.jsxs)(d.a,{sx:{minWidth:400},size:"small","aria-label":"Spotpriser",children:[Object(x.jsx)(b.a,{children:Object(x.jsxs)(h.a,{children:[Object(x.jsx)(p.a,{align:"right",children:"Datum"}),Object(x.jsx)(p.a,{align:"right",children:"Klockslag"}),Object(x.jsx)(p.a,{align:"right",children:"Spotpris"})]})}),Object(x.jsx)(m.a,{children:e.map((function(t){return Object(x.jsxs)(h.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(x.jsx)(p.a,{align:"right",children:t.timeStampDay}),Object(x.jsx)(p.a,{align:"right",children:t.timeStampHour}),Object(x.jsxs)(p.a,{align:"right",children:[t.value," ",t.unit]})]},t.timeStamp)}))})]})})})}var O=r(42),v=r(388),S=r(389),g=r(204),y=r(393),w=r(198),k=r(199),E=r(190),A=r(89);var D=function(){var t=Object(n.useState)({width:0,height:0}),e=Object(u.a)(t,2),r=e[0],a=e[1];return Object(n.useEffect)((function(){function t(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),window.addEventListener("deviceorientation",t),t(),function(){window.removeEventListener("resize",t),window.removeEventListener("deviceorientation",t)}}),[]),r};function N(t){var e=t.data,r=t.currentHour,n=a.a.useState(0),c=Object(u.a)(n,2),i=c[0],o=c[1],s=a.a.useState(),l=Object(u.a)(s,2),j=l[0],d=l[1],b="kr/kWh",h=D();function p(t){var e=t.x,r=t.y,n=t.value;return t.index===j?Object(x.jsxs)("text",{x:e,y:r,dy:-30,dx:11,fill:"#bbb",fontWeight:"bold",fontSize:16,textAnchor:"middle",children:[n.toFixed(2)," ",b]}):null}function m(t){var e=t.x,r=t.y,n=t.payload;return Object(x.jsx)("g",{transform:"translate(".concat(e,",").concat(r,")"),children:Object(x.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#bbb",transform:"rotate(-35)",children:n.value})})}function f(t){var e=t.x,r=t.y,n=t.payload;return Object(x.jsx)("g",{transform:"translate(".concat(e,",").concat(r,")"),children:Object(x.jsxs)("text",{x:0,y:0,dy:0,textAnchor:"end",fill:"#bbb",transform:"rotate(-35)",children:[n.value," ",b]})})}a.a.useEffect((function(){o(function(){var t=Math.max.apply(Math,Object(O.a)(e.map((function(t){return t.value}))).concat([0]));return Math.floor(t)+1}())}),[e]),a.a.useEffect((function(){d(e.findIndex((function(t){return t.timeStamp===r.timeStampShort})))}),[r.timeStampShort,e]);var N=function(t){var e=t.active,r=t.payload,n=t.label;return e&&r&&r.length?Object(x.jsxs)("div",{style:{background:"#3887ba",color:"#2e4355",padding:"1px 15px",border:"solid",borderRadius:"15px",fontWeight:"bold",opacity:"0.8"},children:[Object(x.jsx)("p",{children:n}),Object(x.jsxs)("p",{children:[r[0].value.toFixed(2)," ",b]})]}):null};return Object(x.jsx)(v.a,{width:"100%",height:h.height-100,children:Object(x.jsxs)(S.a,{data:e,margin:{top:20,right:50,left:20,bottom:70},children:[Object(x.jsx)(g.a,{type:"monotone",dataKey:"value",stroke:"#3887ba",label:Object(x.jsx)(p,{}),activeDot:{fill:"#2e4355",stroke:"#3887ba",strokeWidth:4,r:9},dot:"",strokeWidth:"4"}),Object(x.jsx)(y.a,{horizontal:"",vertical:"",stroke:"#243240"}),Object(x.jsx)(w.a,{dataKey:"timeStamp",tick:Object(x.jsx)(m,{}),ticks:e.map((function(t){return t.timeStamp})).filter((function(t,e,r){return e%6===0&&0!==e}))}),Object(x.jsx)(k.a,{domain:[0,i],tick:Object(x.jsx)(f,{}),ticks:function(){var t=Object(O.a)(Array(i+1).keys());return t.shift(),t}()}),Object(x.jsx)(E.a,{x:null===r||void 0===r?void 0:r.timeStampShort,stroke:"orange",strokeWidth:"1"}),Object(x.jsx)(A.a,{cursor:!1,offset:-100,content:Object(x.jsx)(N,{})})]})})}var W=r(200),H=r.n(W);function L(t){var e,r,a=Object(n.useState)(null),c=Object(u.a)(a,2),i=c[0],o=c[1],s=Object(n.useState)(!1),l=Object(u.a)(s,2),j=l[0],d=l[1],b=Object(n.useState)([]),h=Object(u.a)(b,2),p=h[0],m=h[1],O=Object(n.useState)([]),v=Object(u.a)(O,2),S=v[0],g=v[1],y=Object(n.useState)(9e5),w=Object(u.a)(y,2),k=w[0],E=w[1],A=Object(n.useState)(),D=Object(u.a)(A,2),W=D[0],L=D[1],I=t.match.params.priceArea.toUpperCase();function z(){var t=(new Date).toLocaleString("sv-SE").substring(0,14)+"00:00";return{timeStampFull:t.replace(" ","T"),timeStampShort:t.substring(0,16),day:t.substring(0,10),hour:t.substring(11,16)}}return Object(n.useEffect)((function(){if(!["SN1","SN2","SN3","SN4"].includes(I.toUpperCase()))return d(!0),void o("Not supported price area");var t=function(){H()(e()).then((function(t){return t.data})).then((function(t){d(!0),o(null),function(t){var e=t.slice(-48).map((function(t){return{timeStamp:t.TimeStamp,timeStampDay:t.TimeStampDay,timeStampHour:t.TimeStampHour,value:t.Value,unit:t.Unit}}));m(e);var r=e.map((function(t){return{timeStamp:t.timeStampDay+" "+t.timeStampHour,value:Math.round(t.value,0)/100}}));g(r)}(t),E(9e5)}),(function(t){d(!0),o(t),E(15e3)}))},e=function(){var t=r().toLocaleString("sv-SE").split(" ")[0];return"https://thingproxy.freeboard.io/fetch/https://www.vattenfall.se/api/price/spot/pricearea/".concat(t,"/2050-01-01/").concat(I)},r=function(){var t=new Date;return t.setDate(t.getDate()-1),t};t();var n=setInterval((function(){return t()}),k);return function(){return clearInterval(n)}}),[k,t,I]),Object(n.useEffect)((function(){L(z());var t=setInterval((function(){return L(z())}),6e4);return function(){return clearInterval(t)}}),[]),i?Object(x.jsxs)("div",{className:"error-div",children:["Error: ",null!==(e=i.message)&&void 0!==e?e:i]}):j?("/table/:priceArea"===t.match.path?r=Object(x.jsx)(f,{data:p}):"/graph/:priceArea"===t.match.path&&(r=Object(x.jsx)(N,{data:S,currentHour:W})),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{children:["Aktuella spotpriser ",I]}),r]})):Object(x.jsx)("div",{children:"Loading..."})}var I=function(){return Object(x.jsx)(o.a,{basename:"/current-spot-prices",children:Object(x.jsxs)(s.d,{children:[Object(x.jsx)(s.b,{path:"/table/:priceArea",component:L}),Object(x.jsx)(s.b,{path:"/graph/:priceArea",component:L}),Object(x.jsx)(s.b,{exact:!0,path:"/",children:Object(x.jsx)(s.a,{to:"/graph/sn3"})}),Object(x.jsx)(s.b,{path:"/",children:Object(x.jsx)("div",{className:"error-div",children:"Page not found"})})]})})};i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(I,{})}),document.getElementById("root"))}},[[374,1,2]]]);
//# sourceMappingURL=main.a65707d3.chunk.js.map